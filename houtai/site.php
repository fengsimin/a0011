<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\x73\x69\x74\x65"; parent::__construct(); } protected function getData() { goto aQo6a; VHozc: AS7fZ: goto fziSV; mla9Q: foreach ($data as $d) { goto X4K52; Sj19Q: QkEtt: goto nVTC_; VbDsO: $site[$d["\156\141\155\x65"]] = $value; goto Sj19Q; o_I52: if (!($value != '')) { goto QkEtt; } goto VbDsO; X4K52: $value = $d["\x76\141\x6c\x75\x65"]; goto o_I52; nVTC_: J5O0C: goto YeOT0; YeOT0: } goto VHozc; KeNHa: $site = array(); goto mla9Q; aQo6a: $data = $this->db->select($this->table)->all(); goto KeNHa; fziSV: return $this->success($site); goto QeQnt; QeQnt: } protected function postSave($request_data) { goto WurD0; NCyU8: $this->db->rollBack(); goto KfWEL; XIgmE: if (count($error) === 0) { goto buGRO; } goto NCyU8; cnuNe: $this->db->commit(); goto FMrh0; cXzgZ: ApX_3: goto C2w31; hhRgz: return $this->success("\345\267\262\xe4\277\x9d\345\xad\x98\xe6\233\xb4\346\x94\271\xef\xbc\201"); goto cXzgZ; D9_C3: $this->db->beginTransaction(); goto g5UUz; bH7Cb: unset($request_data["\164\157\153\x65\156"], $request_data["\x61\144\155\x69\x6e"], $request_data["\137\x72\x65\x6d\x6f\166\x65\x66\x69\154\x65\x73"]); goto uGRk3; uGRk3: $error = array(); goto D9_C3; g5UUz: foreach ($request_data as $name => $value) { goto EU_hc; HccVg: HJTky: goto j8SSL; UxgEp: if (!($this->db->update($this->table, array("\166\x61\154\165\145" => $value), array("\156\141\155\145", "\75", $name))->is() === false)) { goto HJTky; } goto FDlwL; O4VYj: u3QvH: goto RBM7Q; CfIxL: oAHLX: goto O4VYj; HXKHW: if ($count <= 0) { goto vxcxI; } goto UxgEp; RBM7Q: Igyrn: goto fdqaa; FDlwL: $error[] = $name; goto HccVg; Py7_R: $error[] = $name; goto CfIxL; EU_hc: $count = $this->db->select($this->table)->where(array("\x6e\141\155\x65", "\75", $name))->count(); goto wiF0A; wiF0A: $value = $this->_encode($value); goto HXKHW; j8SSL: goto u3QvH; goto d58Xv; d58Xv: vxcxI: goto DUy4p; DUy4p: if (!($this->db->insert($this->table, array("\x6e\x61\155\x65" => $name, "\x76\141\x6c\x75\x65" => $value))->is() === false)) { goto oAHLX; } goto Py7_R; fdqaa: } goto lI0pe; FMrh0: $this->_log("\x75\160\144\x61\164\x65", array("\164\x69\x74\x6c\x65" => "\347\xbd\x91\347\xab\x99\xe8\xae\276\347\xbd\xae")); goto hhRgz; PkBYJ: goto ApX_3; goto KrWf7; KfWEL: return $this->error("\345\xb7\262\xe4\xbf\235\345\xad\230\345\244\261\xe8\xb4\245\xef\xbc\x81"); goto PkBYJ; lI0pe: RliZu: goto XIgmE; KrWf7: buGRO: goto cnuNe; WurD0: $this->_removeFiles2($request_data["\x5f\162\145\155\x6f\x76\145\x66\x69\154\145\x73"]); goto bH7Cb; C2w31: } protected function postSkin($request_data) { goto lUXQV; YNBlH: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\141\x6d\x65" => $name, "\x76\141\x6c\165\x65" => $value), array("\x6e\141\155\x65", "\75", $name)); fuOoV: } goto rUZaJ; ugS0c: M7sJm: goto YNBlH; IpxPM: file_put_contents($filename, $request_data["\163\x74\171\154\x65\55\x63\157\144\x65"]); goto QS2cR; QS2cR: chmod($filename, 420); goto TYg8l; ekiu3: $request_data["\163\x6b\151\x6e"] = $skins[1]; goto ugS0c; RE8cM: $filename = "\x2e\x2e\x2f\x61\163\x73\x65\x74\57\x63\x73\163\57\163\x74\x79\x6c\x65\x2e\143\163\163"; goto IpxPM; PEUdd: $request_data["\164\150\x65\155\x65"] = $skins[0]; goto ekiu3; sb5AT: if (!isset($request_data["\x74\x68\x65\155\145\x2d\163\153\x69\x6e"])) { goto M7sJm; } goto g0ZTG; lUXQV: if (!isset($request_data["\163\164\x79\x6c\x65\x2d\x63\157\x64\x65"])) { goto br1gW; } goto RE8cM; iLEv5: unset($request_data["\x74\157\x6b\x65\156"], $request_data["\x61\x64\x6d\x69\156"], $request_data["\163\164\x79\154\x65\55\143\157\144\145"]); goto sb5AT; g0ZTG: $skins = explode("\55", $request_data["\164\150\x65\x6d\x65\55\x73\153\151\x6e"]); goto PEUdd; rUZaJ: xZkKw: goto cCZnt; TYg8l: br1gW: goto iLEv5; cCZnt: return $this->success("\xe5\267\xb2\xe4\xbf\x9d\345\255\x98\xe6\233\xb4\346\224\xb9\xef\xbc\x81"); goto LSFjd; LSFjd: } protected function getStyleCode() { $code = file_get_contents("\56\x2e\x2f\141\163\x73\x65\x74\x2f\x63\163\x73\x2f\x73\x74\171\154\145\x2e\x63\163\x73"); return $this->success(array($code)); } }
