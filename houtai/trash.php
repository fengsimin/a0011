<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\164\162\141\163\150"; parent::__construct(); } protected function postDelete($request_data) { goto unfLq; R0og5: $this->db->commit(); goto Ek4lA; Ttf4u: if (count($error) === 0) { goto WX6o2; } goto tPMnI; zGWY_: $ids = $request_data["\151\x64"]; goto shRrv; c4ULN: return $this->error(); goto NSWxZ; sQmX6: mrptX: goto UnllI; unfLq: $error = array(); goto zGWY_; XmYPv: return $this->success(); goto sQmX6; NSWxZ: goto mrptX; goto CmApH; O68Lp: foreach ($ids as $id) { goto gVPQh; TmO3k: $this->_rmdir("\56\56\x2f" . $path); goto OZJzK; upqiK: Yj_2n: goto SZZgI; K_2CR: c48C1: goto jOiA7; p6pFV: goto T2T2o; goto K_2CR; gVPQh: $trash = $this->db->select($this->table)->where(array("\151\x64", "\x3d", $id))->get(); goto F8CMY; jOiA7: if (!($path && count(explode("\x2f", $path)) >= 2)) { goto Svu6I; } goto TmO3k; AqM8g: if ($this->db->delete($this->table, array("\151\144", "\75", $id))->is()) { goto c48C1; } goto zXmmT; zXmmT: $error[] = $trash["\x74\x69\164\154\x65"]; goto p6pFV; V1YfO: T2T2o: goto upqiK; OZJzK: Svu6I: goto V1YfO; F8CMY: $path = $trash["\x70\141\164\150"]; goto AqM8g; SZZgI: } goto QKq6o; tPMnI: $this->db->rollBack(); goto c4ULN; Ek4lA: $this->_log("\144\145\x6c\145\164\x65", array("\164\151\164\154\x65" => count($ids))); goto XmYPv; QKq6o: fXuMZ: goto Ttf4u; CmApH: WX6o2: goto R0og5; shRrv: $this->db->beginTransaction(); goto O68Lp; UnllI: } protected function postReplay($request_data) { goto lIa0b; obYiI: $this->db->beginTransaction(); goto Itimd; KS2y9: $this->_log("\162\x65\160\154\171", array("\164\x69\164\154\145" => count($ids))); goto kpvH1; t_Rpr: xL8Aq: goto GIJki; GIJki: $this->db->commit(); goto KS2y9; I1fjE: QJZjg: goto mIgTd; lIa0b: $error = array(); goto GTj88; VEdi0: $this->db->rollBack(); goto dxGXi; GTj88: $ids = $request_data["\x69\x64"]; goto obYiI; dxGXi: return $this->error(); goto EEoeC; mIgTd: if (count($error) === 0) { goto xL8Aq; } goto VEdi0; D3eRz: u08eM: goto BdKLV; Itimd: foreach ($ids as $id) { goto A4TPv; kiwzp: $this->db->delete($this->table, array("\x69\144", "\75", $id)); goto E3m_f; QhuRk: Vi80I: goto KqCTB; GRqAd: $isadd = $this->db->insert($table, json_decode($trash["\144\141\164\x61"], true)); goto u3EG7; A4TPv: $trash = $this->db->select($this->table)->where(array("\151\x64", "\x3d", $id))->get(); goto MOatZ; Zyx5J: tOS9P: goto WfxlI; E3m_f: goto Vi80I; goto Zyx5J; KqCTB: EHCs5: goto cLO61; u3EG7: if ($isadd === false) { goto tOS9P; } goto kiwzp; WfxlI: $error[] = $trash["\164\x69\x74\154\145"]; goto QhuRk; MOatZ: $table = $trash["\x74\x61\x62\x6c\x65"]; goto GRqAd; cLO61: } goto I1fjE; kpvH1: return $this->success(); goto D3eRz; EEoeC: goto u08eM; goto t_Rpr; BdKLV: } }
